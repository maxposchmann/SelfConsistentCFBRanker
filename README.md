# Self-Consistent CFB Ranker

# Current Rankings:
| Rank |Team                  | Strength |
|------|----------------------|----------|
|     1|Michigan              |4.90534287|
|     2|Arkansas              |4.36588979|
|     3|Notre Dame            |3.98899672|
|     4|Georgia               |3.91796989|
|     5|Oregon                |3.79131514|
|     6|Oklahoma State        |3.44233317|
|     7|BYU                   |3.39455690|
|     8|Iowa                  |3.32523357|
|     9|Alabama               |3.01971565|
|    10|Kentucky              |2.91898413|
|    11|Penn State            |2.78428710|
|    12|Army                  |2.64071884|
|    13|Texas                 |2.61057854|
|    14|Michigan State        |2.45003214|
|    15|UTSA                  |2.43386149|
|    16|SMU                   |2.38728334|
|    17|UCLA                  |2.38710085|
|    18|Fresno State          |2.35068033|
|    19|Baylor                |2.34166703|
|    20|Boston College        |2.30522400|
|    21|Oklahoma              |2.24403925|
|    22|Maryland              |2.24275690|
|    23|Wyoming               |2.15729952|
|    24|Wake Forest           |1.99976445|
|    25|San Diego State       |1.99613625|
|    26|Purdue                |1.94057107|
|    27|Ole Miss              |1.88839209|
|    28|Coastal Carolina      |1.87424517|
|    29|Ohio State            |1.85279362|
|    30|Florida               |1.78496222|
|    31|Rutgers               |1.70261765|
|    32|Texas A&M             |1.61775208|
|    33|Kansas State          |1.57186499|
|    34|Western Michigan      |1.55916658|
|    35|Cincinnati            |1.49855692|
|    36|South Alabama         |1.39499077|
|    37|LSU                   |1.21954331|
|    38|Louisville            |1.07732041|
|    39|Memphis               |1.03337434|
|    40|Texas Tech            |0.99468013|
|    41|Syracuse              |0.94885206|
|    42|Oregon State          |0.86500136|
|    43|Boise State           |0.82299761|
|    44|Utah State            |0.79101570|
|    45|UAB                   |0.77117862|
|    46|Washington            |0.74983950|
|    47|Auburn                |0.74144922|
|    48|Pitt                  |0.65813936|
|    49|Arizona State         |0.65640174|
|    50|North Carolina State  |0.61771038|
|    51|Louisiana             |0.55990731|
|    52|Duke                  |0.53200541|
|    53|Liberty               |0.49155803|
|    54|Air Force             |0.48016508|
|    55|Stanford              |0.47742109|
|    56|Appalachian State     |0.47675274|
|    57|Virginia Tech         |0.43592867|
|    58|UCF                   |0.37984903|
|    59|Houston               |0.37549438|
|    60|Mississippi State     |0.36576923|
|    61|Charlotte             |0.35674058|
|    62|Eastern Michigan      |0.35052690|
|    63|UTEP                  |0.32828674|
|    64|Louisiana-Monroe      |0.22024868|
|    65|Wisconsin             |0.06375125|
|    66|Miami (FL)            |-0.04510487|
|    67|Texas Christian       |-0.06177025|
|    68|Nevada                |-0.17293048|
|    69|West Virginia         |-0.17299663|
|    70|South Carolina        |-0.22549331|
|    71|Northern Illinois     |-0.24615424|
|    72|Missouri              |-0.41974700|
|    73|USC                   |-0.42841041|
|    74|Vanderbilt            |-0.50825695|
|    75|Indiana               |-0.53725834|
|    76|Iowa State            |-0.54078775|
|    77|Clemson               |-0.56568720|
|    78|Tulsa                 |-0.61632650|
|    79|Utah                  |-0.63253602|
|    80|North Carolina        |-0.70902335|
|    81|Minnesota             |-0.75567643|
|    82|Temple                |-0.75646571|
|    83|Tennessee             |-0.76439147|
|    84|Colorado State        |-0.80350906|
|    85|Northwestern          |-0.95388802|
|    86|Louisiana Tech        |-0.96451758|
|    87|Florida Atlantic      |-1.00469071|
|    88|Toledo                |-1.01338807|
|    89|Texas State           |-1.04900477|
|    90|Bowling Green State   |-1.06387710|
|    91|San Jose State        |-1.19706885|
|    92|Virginia              |-1.22774732|
|    93|East Carolina         |-1.24437658|
|    94|New Mexico            |-1.25480213|
|    95|Troy                  |-1.27077667|
|    96|Georgia Tech          |-1.30827503|
|    97|Central Michigan      |-1.36677411|
|    98|Georgia State         |-1.52351124|
|    99|Arizona               |-1.62793250|
|   100|Marshall              |-1.67969789|
|   101|Western Kentucky      |-1.69946732|
|   102|Buffalo               |-1.71109383|
|   103|Kent State            |-1.85981343|
|   104|Florida State         |-1.91145958|
|   105|Rice                  |-1.92426974|
|   106|South Florida         |-2.07722162|
|   107|Tulane                |-2.16788026|
|   108|Kansas                |-2.20007123|
|   109|Nebraska              |-2.22067781|
|   110|Hawaii                |-2.32987829|
|   111|Ball State            |-2.44053383|
|   112|Middle Tennessee State|-2.45368373|
|   113|Miami (OH)            |-2.48702912|
|   114|Connecticut           |-2.52044080|
|   115|Georgia Southern      |-2.53007417|
|   116|Illinois              |-2.56367365|
|   117|Southern Mississippi  |-2.58850846|
|   118|Nevada-Las Vegas      |-2.61057783|
|   119|North Texas           |-2.68648133|
|   120|Akron                 |-2.71188621|
|   121|Colorado              |-2.76037621|
|   122|Arkansas State        |-2.80217367|
|   123|California            |-2.90680266|
|   124|Ohio                  |-2.93091021|
|   125|Old Dominion          |-2.98724405|
|   126|Washington State      |-3.07996831|
|   127|Massachusetts         |-3.11295615|
|   128|Navy                  |-3.24141522|
|   129|Florida International |-3.37621616|
|   130|New Mexico State      |-4.50041643|

# Explanation:

I was looking at a couple of computer CFB rankings, and the following occurred to me:
 - I can use a computer.
 - I know about football.
 - My opinions are better than other people's opinions.

So of course I had to do my own ranking system. Here are my principles:
 - Games are won or lost. Point differentials are meaningless. Really, your team is better because your 8th-string QB rushed for a couple garbage time TDs?
 - Wins and losses both matter. Equally.
 - The order in which games are played doesn't matter. No late-season bias. No inertia.
 - Beating a good team is better than beating a bad team, and similarly losing to a good team isn't as bad as losing to a bad team.
 - No judgement should be involved. No adjustable paramenters. In other words, there's no seed from a preseason poll, nor should there be sorting by P5/G5 etc. The rankings themselves have to determine what is a good win.
 - The team strengths used to generate the rankings should return themselves if run through the algorithm again. Put another way, the "Alabama only has quality losses to teams that beat Alabama" problem should be addressed quantitatively.

And thus the Self-Consistent CFB Ranker (SCCR) was born. The guts of the ranking are as follows: an exponential function takes the "strength" of the opponent and uses win/loss outcome to set the sign. This nonlinear function makes signature wins and season-defining losses possible. All strengths are set at 1 to begin with, then it iterates until self-consistency of strengths. Multiple games are counted separately, rather than cancelling.

The units of strength are effectively wins (with losses negative). The inputs to the exponential are scaled by the largest magnitude strength, so the maximum possible difference between values of FBS wins (or losses) is exp(2) = 7.389. By this win metric, a team would do much better to split a series with the best team in FBS (+2.3504 net wins) than to beat the worst team in FBS twice (+0.7358 net wins). This feels reasonably fair, and also has the benefit of converging well. However, it would be trivial to replace this strength function with any other function that tends to converge. Please feel free to clone the project and play with whatever system you think better represents the relative values of wins.

Also (optionally) output is power, which is strength per game played. The strength and power of the remaining schedule for each team (SRS and PRS) are also output with the extended print option set to true.

One caveat about the "no inputs" thing: only FBS teams are tracked, and all non-FBS teams have strength set to (minimum FBS strength - 1.0).

Data is downloaded from Sports Reference (i.e. https://www.sports-reference.com/cfb/years/2021-schedule.html click on "Share & Export" then "Get table as CSV (for Excel)").

# Examples:
## 2019 
Let's take a look at the top 25 prior to bowl games for the 2019 season. I'll use the results as of December 8th to match the final CFP committee:
| Rank |Team                  | Strength | CFP Committee Rank |
|------|----------------------|----------|--------------------|
|     1|Ohio State            |16.26966338|2|
|     2|LSU                   |14.05046362|1|
|     3|Clemson               |11.89707925|3|
|     4|Memphis               |11.24605403|17|
|     5|Oklahoma              |10.83967630|4|
|     6|Boise State           |10.16909837|19|
|     7|Georgia               |9.88354404|5|
|     8|Appalachian State     |9.41012970|20|
|     9|Wisconsin             |9.15258873|8|
|    10|Notre Dame            |9.13713664|15|
|    11|Oregon                |8.92128577|6|
|    12|Penn State            |8.63033452|10|
|    13|Baylor                |8.25654423|7|
|    14|Utah                  |8.19446649|11|
|    15|Cincinnati            |8.10704902|21|
|    16|Michigan              |7.82255650|14|
|    17|SMU                   |7.46237783|NR|
|    18|Florida               |7.12685895|9|
|    19|Minnesota             |7.06857411|18|
|    20|Auburn                |7.06014702|12|
|    21|Alabama               |6.83092354|13|
|    22|Iowa                  |6.78751754|16|
|    23|Navy                  |6.72241255|23|
|    24|Air Force             |6.63159438|NR|
|    25|Florida Atlantic      |6.15217781|NR|

This ranking results in 3 of the 4 playoff selection, and Oklahoma is only edged out by Memphis by a razor-thin margin. Evidently this ranking system is not the hot-take generator I had feared. In total 4 of the top-25 teams differ from the CFP committee's list. Dropped are 8-4 USC (22), 9-4 Virginia (24), and 8-4 Oklahoma State (25). Added are 10-3 SMU, 11-2 Air Force, and 11-3 FAU. Overall this ranking prefers G5 teams with more wins over P5 teams with fewer, relative to the CFP. I agree.

So 2019 is a nice, uncontroversial year. LSU were champs, they deserved to be in the CFP, and after all bowls SCCR agrees that they were the best.

## 2017
But what about 2017? Starting with the same point (December 3rd), who should have been in the CFP?
| Rank |Team                  | Strength | CFP Committee Rank |
|------|----------------------|----------|--------------------|
|     1|Clemson               |13.75507312|1|
|     2|Oklahoma              |13.39261665|2|
|     3|Georgia               |13.17234771|3|
|     4|Ohio State            |12.82094855|5|
|     5|Wisconsin             |12.47735393|6|
|     6|UCF                   |11.98682264|12|
|     7|USC                   |11.57901968|8|
|     8|Alabama               |10.46491269|4|
|     9|Notre Dame            |10.23220719|14|
|    10|Auburn                |9.94039981|7|

That's only a little different from the CFP as well.. According to SCCR, Ohio State should been given a chance to play for the title over Alabama. UCF did climb substantially, but not enough to put them in playoff contention.

Interestingly, the Colley Matrix still put UCF at 1 after bowl games, even though they didn't get to face off in the CFP. Since this ranking bears some similarity in philosophy to Colley, let's see if that's true for SCCR also.

| Rank |Team                  | Strength |
|------|----------------------|----------|
|     1|Alabama               |15.53639122|
|     2|Ohio State            |15.40665605|
|     3|Georgia               |15.32875417|
|     4|Wisconsin             |14.69678947|
|     5|Oklahoma              |13.75832765|
|     6|UCF                   |13.75344137|
|     7|Clemson               |12.92696290|
|     8|Penn State            |11.87209296|
|     9|Notre Dame            |11.41375257|
|    10|Michigan State        |10.33070942|

Sorry UCF, but SCCR agrees that Alabama were the 2017 national champions, with their playoff victories vaulting them to the top.

# Comparison with Colley Matrix

It has come to my attention that there is already a self-consistent ranking method, the Colley Matrix (https://www.colleyrankings.com/index.html), which was part of the BCS system (prior to the CFP), and is still recognized by NCAA. No surprise that something similar has been done, as Daryl says: there's no such thing as an original sin. Anyway it seems some comparison is warranted. Please note that I am not an expert on the Colley system, but I will do my best to discuss it accurately. The similarities between the two are substantial:
- Only wins and losses are considered (no score differential).
- There is no sorting by conference or history (bias-free).
- The order in which games are played is irrelevant.
- The results are self-consistent.

However, there are also substantial differences between the two methods. First, to state the obvious, the two generate different rankings unless some miraculous coincidence has occurred. Here are some more details and examples:

## Units.

SCCR outputs strengths with units of wins, with wins against above-average teams being worth >1 win and wins against below-average teams worth <1 win, and with losses negative and opposite to wins. Thus as of week 5 2021, 4-0 Michigan is at \#1 with 4.905 effective wins. Meanwhile the Colley matrix returns ratings which are more similar to win percentages. Colley also has Michigan at \#1 for the same week, with a rating of 0.92392. In the Colley system, ratings are always between 0 and 1, so even an undefeated team with the highest strength-of-schedule will show a rating <1. In SCCR strengths average around 0, and beating an average team yields exp(0) = 1 wins. In Colley, ratings average to 0.5, i.e. an even win-loss rate.

## Strength-of-schedule adjustments for win/loss outcomes.

Both systems use the strengths of all opponents iteratively to determine the values of wins and losses. However, in Colley whether a particular game was won or lost does not affect the strength of schedule adjustment (to first order). In SCCR the win-loss state is directly accounted for in the strength exponential function. This is best demonstrated by example. Again, let's take (the current at time of writing) week 5 2021. Rutgers is 3-1, having just lost to \#1 Michigan. In SCCR Rutgers is ranked at \#31 with strength 1.703. In Colley, Rutgers is \#16 with rating 0.7713. Now, let's imagine a hypothetical in which Rutgers had beaten Michigan, but lost a previous game against Temple. In Colley, Rutgers remains at \#16 and has rating 0.7700. This is nearly identical to before. In SCCR, Rutgers rises to \#18 (a jump of 13 positions) and has strength 2.415 (+0.712 wins). This is because in SCCR the value of beating a very good opponent outweighs the penalty of losing to a middling opponent. On the other hand, in Colley, Rutger's rating only changes at all because of the changes in the strength-of-schedule of other teams (which is why it hardly budged).

## Differing number of games completed.

As discussed in point 1, SCCR is effectively a cumulative resume rating system, while Colley is based on a rate. Therefore SCCR will prefer teams with larger numbers of games played (or more specifically, won) relative to Colley. I demonstrate this on the 2020 "regular" season (I had to use the Wayback Machine on the Colley website, and this only shows top 25 ranks and no ratings). Here are SCCR and Colley ranks for 2020 as of December 20th:

| Rank |Team                  | Strength | Colley Team |
|------|----------------------|----------|-------------|
|     1|Alabama               |11.69711574| Alabama |
|     2|Coastal Carolina      |11.00379596| Cincinnati |
|     3|Clemson               |9.92315363| Coastal Carolina |
|     4|Notre Dame            |9.34412300| Clemson |
|     5|Cincinnati            |8.97566887| Ohio State |
|     6|Louisiana             |8.62781988| San Jose State |
|     7|BYU                   |8.15400026| Louisiana |
|     8|San Jose State        |7.18744295| Notre Dame |
|     9|Miami (FL)            |6.91330163| BYU |
|    10|Iowa State            |6.61091158| Miami |
|    11|Texas A&M             |6.49204527| Ball State |
|    12|Oklahoma              |6.30713399| Texas A&M |
|    13|Ohio State            |6.12094527| Indiana |
|    14|Ball State            |5.35068680| Oklahoma |
|    15|Oklahoma State        |5.09987203| Tulsa |
|    16|North Carolina State  |4.81261849| Iowa State |
|    17|North Carolina        |4.68254895| Georgia |
|    18|Georgia               |4.66836510| USC |
|    19|Florida               |4.66375087| Buffalo |
|    20|Tulsa                 |4.60682731| Colorado |
|    21|Indiana               |4.59390236| North Carolina |
|    22|Liberty               |4.21406029| North Carolina State  |
|    23|Marshall              |3.88993222| Army |
|    24|Appalachian State     |3.83632846| Oklahoma State |
|    25|Texas                 |3.82501029| Northwestern |

Notice that 6-0 Ohio State has dropped from playoff position at \#3 in the CFP rankings to \#13 here (\#5 in Colley), due to not having earned enough wins in their shortened season. They would have been replaced by the Chanticleers! Now tell me there's a better rating system.

Comparing the Colley rankings to SCCR rankings, the big gainers under Colley were B1G and PAC-12 teams like Ohio State, Indiana, USC, and Colorado, who all played shortened seasons. So as expected, SCCR prefers teams with more wins under their belt relative to Colley. While neither is intended as a predictive method, it is probably fair to say that Colley has more traits of a predictive method and SCCR comes closer to a pure resume ranker.

Note that the team power (wins per game played) is also available within SCCR, if you prefer an efficiency metric. The top four teams by power in 2020 were: Alabama, San Jose State, Ohio State, Coastal Carolina.

## What's a win worth?

In SCCR, the answer is the same for everyone: exp({opponent strength}/{maximum strength}). In Colley, the answer depends on how your year has been going. Here's an example. As I write this, it is Tuesday night following week 5 of 2021. Alabama sits at \#9 in SCCR with strength of 3.01971565, and \#2 in Colley with rating 0.881929. Meanwhile Ohio is \#124 (-2.93091021) by SCCR and \#152 (0.163166) by Colley. Let's imagine these two took it upon themselves to play an unscheduled match here on Tuesday night while the rest of the teams rest. Alabama wins of course. By SCCR, Alabama gains 0.53140733 to total 3.55112298 wins and moves up to \#6. Per Colley, Alabama **loses** 0.03004 rating points and drops to \#4 with 0.85189. Punished for winning!

Now suppose that instead of Alabama, it was the California Golden Bears who beat Ohio tonight. California is currently \#123 (-2.90680266) by SCCR and \#122 (0.31681) by Colley. After this hypothetical win, they gain 0.41280301 wins to move to \#114 (-2.49399965) in SCCR, and gain 0.04772 points to go to \#115 (0.36453) in Colley.

So what do we learn? In Colley, a win against a bad team can decrease your strength-of-schedule adjustment by enough to outweight the value of the win (especially if you are undefeated), while in SCCR beating a given opponent is worth (approximately) the same amount to every team. As we can see, the win value in SCCR is not identically the same because the outcome adjusts the strengths of schedule for all teams (specifically, California beating Ohio decreases Ohio's strength by much more than Alabama beating them would). This effect would be diminished if the example was after a complete season, but unfortunately the Colley website only allows for hypothetical games to be added to the current season-in-progress.
